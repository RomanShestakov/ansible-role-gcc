---

# https://www.vultr.com/docs/how-to-install-gdb-on-centos-6

- name: GDB | check if source archive exists
  command: /usr/bin/test -e {{gdb_tmp}}
  ignore_errors: True
  register: gdb_arch_exists

- name: GDB | get sources
  become: true
  get_url: url={{gdb_url}} dest={{gdb_tmp}} timeout=180
  when: gdb_arch_exists.rc != 0
  register: gdb_downloaded

- name: GDB | Extract sources
  become: true
  unarchive: src={{gdb_tmp}} dest="/tmp" creates={{gdb_build}} remote_src=yes
  when: gdb_downloaded.changed
  register: gdb_extract

- name: GDB | Configure
  become: true
  shell: chdir={{gdb_build}} \
              ./configure \
              --with-python=yes \
              --prefix={{gdb_install_dir}} \
              --disable-werror
  when: gdb_extract.changed
  register: gdb_configure

- name: GDB | Make
  become: true
  shell: chdir={{gdb_build}} make
  when: gdb_configure.changed
  register: gdb_make

- name: GDB | Install
  become: true
  shell: chdir={{gdb_build}} make install
  when: gdb_make.changed
...
